# DataRobot Notebook Admin Viewer

A web-based admin tool for viewing and managing DataRobot Notebooks and Codespaces across all use cases.

![Tech Stack](https://img.shields.io/badge/Bun-000000?style=flat&logo=bun&logoColor=white)
![React](https://img.shields.io/badge/React-61DAFB?style=flat&logo=react&logoColor=black)
![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=flat&logo=typescript&logoColor=white)
![Tailwind](https://img.shields.io/badge/Tailwind-38B2AC?style=flat&logo=tailwind-css&logoColor=white)

## Features

- 📊 **Data Table** - View all notebooks and codespaces with 10 detailed columns
- 🔍 **Filtering** - Quick filters for codespaces, inactive items, and running sessions
- 📈 **Sorting** - Sort by any column (UC name, creator, dates, etc.)
- 📄 **Pagination** - Browse through 100 items per page
- 📥 **Export Controls** - Copy or download the current table view as CSV with link columns
- 🎨 **Modern UI** - Built with shadcn/ui components and Tailwind CSS
- ⚡ **Fast** - Powered by Bun with 5-minute data caching

## Prerequisites

- [Bun](https://bun.sh) v1.3.1 or later
- DataRobot API token

## Setup

1. **Install dependencies:**
   ```bash
   bun install
   ```

2. **Configure environment:**
   
   Create a `.env` file in the project root:
   ```bash
   DATAROBOT_API_TOKEN=your_api_token_here
   ```

3. **Optional: Pre-build CSS bundle:**
   ```bash
   bun run tailwind:build
   ```
   (The development script runs this automatically before watching for changes.)

## Usage

### Development Mode

Start the development server with hot reload:

```bash
bun run dev
```

This runs the Tailwind CLI in watch mode and the Bun server simultaneously.

Then open [http://localhost:3000](http://localhost:3000) in your browser.

### Production Mode

```bash
bun run start
```

The start script performs a one-off Tailwind build before launching the server.

## Available Scripts

| Command | Description |
|---------|-------------|
| `bun run tailwind:build` | Compile Tailwind CSS bundle once (minified) |
| `bun run dev` | Start Tailwind watcher and Bun dev server |
| `bun run start` | Build CSS then launch production server |
| `bun test` | Run tests |

## Project Structure

```
dr-nb-admin-viewer/
├── index.ts                 # Bun server + API
├── index.html              # Entry point
├── src/
│   ├── App.tsx             # Main React component
│   ├── components/         # React components
│   │   ├── NotebooksTable.tsx
│   │   ├── FilterCheckboxes.tsx
│   │   ├── CountDisplay.tsx
│   │   └── ui/             # shadcn/ui components
│   ├── api/                # DataRobot API client
│   ├── styles/             # CSS source + generated bundle (`tailwind.css`)
│   └── types/              # TypeScript types
└── reference/              # Design mockups & data samples
```

## Generated Files

- `src/styles/tailwind.css` is produced by the Tailwind CLI and ignored by git; it is regenerated by the dev/start scripts and by running `bun run tailwind:build`.

## Features Overview

### Data Table Columns

| Column | Description |
|--------|-------------|
| UC名 | Use Case name |
| 名前 | Notebook/Codespace name |
| タイプ | Type (notebook/codespace) |
| ステータス | Session status (running/stopped) |
| 作成者 | Creator username |
| 作成時間 | Creation date |
| 編集者 | Last editor username |
| 編集日時 | Last updated date |
| 定期実行 | Has schedule (はい/いいえ) |
| 定期実行有効 | Schedule enabled (はい/いいえ) |

### Copy & Download CSV

- Two buttons above the table let you copy the current page or download it as `list.csv`.
- The exported data includes all visible columns plus two additional fields:
  - `UC名_link` – direct URL to the use case when available.
  - `名前_link` – direct URL to the notebook/codespace when available.
- Copied CSV briefly shows a `Copied` state for feedback before reverting to `Copy`.

### Filters

- **Codespaceのみ** - Show only codespaces
- **1ヶ月以上未使用** - Show items not updated in over 30 days
- **使用中** - Show only items with running sessions

Filters can be combined and work cumulatively.

## API Endpoint

The server exposes a REST API endpoint:

**GET** `/api/notebooks`

Returns:
```json
{
  "total": 42,
  "codespaceCount": 35,
  "notebookCount": 7,
  "data": [...]
}
```

Data is cached for 5 minutes to reduce load on DataRobot API.

## Documentation

For detailed implementation documentation, see [IMPLEMENTATION.md](./docs/IMPLEMENTATION.md).

## Tech Stack

- **Runtime:** [Bun](https://bun.sh) - Fast all-in-one JavaScript runtime
- **Framework:** [React 19](https://react.dev) - UI library
- **Language:** [TypeScript 5](https://www.typescriptlang.org) - Type safety
- **Styling:** [Tailwind CSS 4](https://tailwindcss.com) - Utility-first CSS with CLI pipeline
- **UI Components:** [shadcn/ui](https://ui.shadcn.com) - Re-usable components
- **Table:** [TanStack Table](https://tanstack.com/table) - Headless table library
- **Icons:** [Lucide React](https://lucide.dev) - Icon library

## License

Private project - All rights reserved
